# 云原生

- [云原生](#云原生)
  - [文档](#文档)
  - [提纲](#提纲)
  - [云原生应用VS传统应用](#云原生应用VS传统应用)
  - [云原生对公司的贡献](#云原生对公司的贡献)
    - [速度](#速度)
    - [弹性扩展](#弹性扩展)
    - [安全](#安全)
  - [按照整体技术架构分层实施](#按照整体技术架构分层实施)
  - [整体技术体系形态](#整体技术体系形态)
    - [IaaS——基础设施即服务](#IaaS基础设施即服务)
      - [底层系统——rancherOS](#底层系统rancherOS)
        - [概述](#概述)
        - [优势](#优势)
    - [PaaS——平台即服务](#PaaS平台即服务)
      - [容器平台Docker](#容器平台Docker)
      - [DevOps平台](#DevOps平台)
      - [微服务平台](#微服务平台)

## 文档

   1. docker（secret、stack除外），k8s、gitlab、gitlabCI、rancher

## 提纲

- 为什么用云原生
- 给公司带来什么好处
- 按照技术体系分层部署
- 整体技术体系形态

## 云原生应用VS传统应用

|                               云原生应用                               |                                    传统应用                                    |
| :--------------------------------------------------------------------: | :----------------------------------------------------------------------------: |
| 可预测。云原生应用符合旨在通过可预测行为最大限度提高弹性的框架或“合同” | 不可预测。通常构建时间更长，大批量发布，只能逐渐扩展，并且会发生更多的单点故障 |
|                             操作系统抽象化                             |                                  依赖操作系统                                  |
|                             资源调度有弹性                             |                           资源冗余较多，缺乏扩展能力                           |
|                      团队借助DevOps更容易达成协作                      |                             部门墙导致团队彼此孤立                             |
|                                敏捷开发                                |                                   瀑布式开发                                   |
|                     微服务各自独立，高内聚，低耦合                     |                                单体服务耦合严重                                |
|                             自动化运维能力                             |                                    手动运维                                    |
|                                快速恢复                                |                                    恢复缓慢                                    |

## 云原生对公司的贡献

### 速度

- 云原生架构中DevOps理念，使用CI/CD工具，快速实现部署、更新、实验并交付项目

### 弹性扩展

使用容器化对服务进行管理，将应用程序隔离到共享操作系统内核的小型轻量级执行环境中，把服务打包成容器并进行编排，实现弹性扩展、服务更新等功能

### 安全

- 可视化(容器编排可视化工具rancher，Prometheus...)

云原生架构中可以为公司提供各方民的可视化管理，包括服务的状态、安全、监控等等，以便可以在发生故障时看到它。

- 故障隔离

为了限制由故障带来的风险，我们需要限制可能会受到故障影响的组件或功能的范围。比如一个功能的故障会引发另一个功能出现故障，单体架构通常就是这种类型的故障模式。而我们采用云原生架构中的微服务理念，通过将项目拆分为微服务，可以将任何一个微服务的故障限制在自身上，但还需要结合容错来实现。

- 容错

- 自动恢复

## 按照整体技术架构分层实施

根据部门技术架构整理为六个层面，分别是`展示层`、`应用层`、`算法支撑`、`数据支撑`、`服务层`、`环境层`

云原生作为环境层，为我们整个技术框架提供标准的运行环境

## 整体技术体系形态

### IaaS——基础设施即服务

#### 底层系统——rancherOS

##### 概述

>RancherOS是一个基于Docker的Linux的发行版系统，简单说，它的init进程(1号进程）就是一个Docker Container（称为System Docker），这个Container被精简到仅仅可以用来运行其他Docker Container（称为User Docker）。

##### 优势

- 可以与 Docker 的开发速度相匹配，提供最新版本的 Docker；
- 不再需要复杂的初始化系统，使用一个简单的配置文件，管理人员很容易就可以将系统服务配置成 Docker 容器；
- 容易扩展，用户很容易通过配置使 RancherOS 启动一个自定义的控制台容器，提供 Ubuntu、CentOS 或者 Fedora 发行版的体验；
- 资源占用小，启动速度快，容易移植，安全性更好；
- 升级、回滚简单；
- 可以使用像 Rancher 这样的容器管理平台，容易维护。

### PaaS——平台即服务

#### 容器平台Docker

- Docker镜像仓库
- docker容器编排工具——k8s
- 容器编排可视化管理工具——rancher
- 节点和资源管理
- 多集群管理
- 监控与管理
- 日志管理
- ...

#### DevOps平台

- 代码仓库——gitlab
- 持续集成/持续部署——gitlabCI
    1. 多语言
    2. 生命周期管理
    3. 测试
    4. 配置管理

#### 微服务平台

- 服务网关（网格）
- 服务注册与发现
- 分布式应用管理
- 分布式消息系统
- 配置管理
- 熔断监控
- 服务跟踪
